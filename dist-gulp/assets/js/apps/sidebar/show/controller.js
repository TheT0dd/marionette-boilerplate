define(["app","apps/sidebar/show/view","entities/sidebar","cache/cache"],function(e,r){return e.module("SidebarApp.Show",function(e,o,i,t,n,a){e.Controller={showSidebar:function(){var i=o.request("cache:get:logged:user");console.log("App.SidebarApp: fetched user from cache: ",i);var t=i.get("role");console.log("App.SidebarApp: user role: ",t);var n=o.request("sidebar:entities",t),l=new r.Sidebar({collection:n});l.on("childview:navigate",function(e,r){var i=r.get("navigation").trigger;if(i){var t=r.get("navigation").options;console.log("App.SidebarApp: nav trigger: "+i),o.trigger(i,t)}}),o.rootView.showChildView("sidebar",l),l.listenTo(i,"change",function(){a.has(i.changed,"role")&&e.Controller.showSidebar()})},hideSidebar:function(){o.rootView.getRegion("sidebar").empty()},activateElement:function(e){var r=o.request("cache:get:logged:user");if(r){var i=r.get("role"),t=o.request("sidebar:entities",i);if(!t)return void console.warn("App.SidebarApp.Show.Controller: No elements found for role: ",i);var n=t.find(function(r){return r.get("navigation").trigger===e});n&&(t.deselect(),n.select())}},deactivateAllElements:function(){var e=o.request("cache:get:logged:user");if(e){var r=e.get("role"),i=o.request("sidebar:entities",r);return i?void i.deselect():void console.warn("App.SidebarApp.Show.Controller: No elements found for role: ",r)}}}}),e.SidebarApp.Show.Controller});