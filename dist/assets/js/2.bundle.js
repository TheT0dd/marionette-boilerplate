webpackJsonp([2],{41:function(e,t,i){{var n=i(2),o=i(55),a=i(51);i(6),i(3)}n.module("UsersApp.Login",function(e,t,i,n,s,r){e.Controller={showLogin:function(){var e=new o.Login;e.on("submit",function(t){console.log(t),e.triggerMethod("clear:validation:errors"),e.triggerMethod("show:preloader");var i=a.login(t);i.done(function(e){}),i.fail(function(){})}),e.on("cancel",function(){t.showLanding()}),t.rootView.showChildView("main",e)}}}),e.exports=n.UsersApp.Login.Controller},55:function(e,t,i){var n=i(2),o=i(147),a=i(154);n.module("UsersApp.Login.View",function(e,t,i,n,s,r){e.Login=o.extend({template:a})}),e.exports=n.UsersApp.Login.View},147:function(e,t,i){(function(t,n){var o=i(22),a=i(2),s=(i(159),i(160),{customToggler:"data-custom-toggler",arrayInput:"data-parse-as-array",selectLimit:"data-select-limit",dateTime:"data-datetime"}),r={formGroup:".form-group, .form-group-sm, .form-group-lg",submitButton:".btn-submit",cancelButton:".btn-cancel",fileButton:".file-upload",preloader:".preloader",validationError:".validation-error",filePreviewList:"ul.file-preview-list"},d={hidden:"hidden",formWithErrors:"has-errors",formGroupWithErrors:"has-error"},c={momentDateFormats:["D MMM YYYY","D MMMM YYYY","MMM D YYYY"]},l=function(e,i){console.log("Validating file: ",i);var n={type:{any:/.*/gim,document:/pdf|msword|officedocument\.word|opendocument\.text/gim,image:/image\/(jpeg|png|gif)/gim},suffix:{any:/.*/gim,document:/(\.pdf$)|(\.doc$)|(\.docx$)|(\.odt$)/gim,image:/(\.jpe?g$)|(\.png$)|(\.gif$)/gim}};e=e.split(",");for(var o=0,a=e.length;a>o;o++){var s=t.trim(e[o]);if(n.type[s]&&n.type[s].test(i.type)||n.suffix[s]&&n.suffix[s].test(i.name))return!0}return!1};e.exports=o.ItemView.extend({_ui:{form:"form",namedElements:"[name]",formGroup:r.formGroup,submitButton:r.submitButton,cancelButton:r.cancelButton,preloader:r.preloader,validationError:r.validationError,customToggler:"["+s.customToggler+"]",arrayInput:"["+s.arrayInput+"]",limitedCheckbox:r.formGroup+"["+s.selectLimit+"] [type=checkbox]",fileButton:r.fileButton,fileInput:"input[type=file]",input:"input",datetimeInput:"["+s.dateTime+"]"},events:{"click @ui.submitButton":"submitForm","click @ui.cancelButton":"cancelForm","click @ui.fileButton":"triggerFileBrowse","change @ui.fileInput":"handleFileSelect","keypress @ui.input":"submitOnEnter"},constructor:function(){this.ui=n.extend({},this._ui,this.ui),this._files={},this.on("render",function(){this.applyCheckboxLimit(),this.bindCustomInputTogglers(),this.initDatetimePicker()}),this.on("before:destroy",function(){console.log("before:destroy ",this,this._files),this.ui.namedElements.off()}),o.ItemView.prototype.constructor.apply(this,arguments)},onShowPreloader:function(){this.ui.submitButton.addClass(d.hidden),this.ui.preloader.removeClass(d.hidden)},onHidePreloader:function(){this.ui.preloader.addClass(d.hidden),this.ui.submitButton.removeClass(d.hidden)},onClearValidationErrors:function(){this.ui.form.removeClass(d.formWithErrors),this.ui.formGroup.removeClass(d.formGroupWithErrors),this.ui.validationError.addClass(d.hidden).empty()},_getBracketNotation:function(e){var t=e.split(".");return t.reduce(function(e,t,i,n){var o;return o=i>1?e+"]["+t:e+"["+t,i===n.length-1&&(o+="]"),o})},_showValidationErrors:function(e){var i=this;n.each(e,function(e,t){if(e instanceof Object)i._showValidationErrors(e);else{var n=i._getBracketNotation(t),o=i.$el.find('[name="'+n+'"]');0===o.length&&(o=i.$el.find('[name^="'+n+'"]'));var a=o.closest(r.formGroup);a.addClass(d.formGroupWithErrors),a.find(r.validationError).html(e).removeClass(d.hidden)}}),t("html, body").animate({scrollTop:0})},onShowValidationErrors:function(e){e&&0!==e.length&&(this.triggerMethod("clear:validation:errors"),this.triggerMethod("show:main:form:error"),this._showValidationErrors(e))},onShowMainFormError:function(){this.ui.form.addClass(d.formWithErrors)},applyCheckboxLimit:function(){this.ui.limitedCheckbox.on("change",function(e){var i=t(e.target),n=i.closest(r.formGroup),o=parseInt(n.attr(s.selectLimit),10),a=n.find("input[type=checkbox]:checked");o>0&&a.length>o&&(i.prop("checked",!1),e.preventDefault())})},bindCustomInputTogglers:function(){var e=this,i=function(e,t){e.prop("checked")||e.prop("selected")?t.removeClass(d.hidden).focus():t.addClass(d.hidden)};e.ui.customToggler.each(function(){var n=t(this),o=n.closest(r.formGroup),a=n.attr(s.customToggler),d=e.$el.find("[name="+a+"]");if(/option/i.test(n.prop("tagName"))){var c=n.closest("select");c.on("change",function(e){i(n,d)})}if(/input/i.test(n.prop("tagName"))){var l=n.attr("name").split("[")[0],p=o.find("[name^="+l+"]");p.on("change",function(e){i(n,d)})}d.on("keypress keydown keyup",function(e){n.val(d.val())})})},_consumeCustomInputs:function(e){var i=n.extend({},e),o=this;return o.ui.customToggler.each(function(){var e=t(this),a=e.attr(s.customToggler),r=o.$el.find("[name="+a+"]"),d=(e.val(),e.attr("name")),c=/([\s\S]+)\[([\s\S]+)\]/;if(c.test(d)){var l=d.match(c);n.each(i[l[1]],function(e,t){t===l[2]&&e===!0&&(r.val().length>0&&(i[l[1]][r.val()]=!0),delete i[l[1]][t])})}else delete i[a]}),i},_consumeCheckboxGroups:function(e){var t=n.extend({},e),i=this;return n.each(t,function(e,o){if(e instanceof Object){var a=i.$el.find("[name^="+o+"]");if("checkbox"===a.attr("type")&&"undefined"==typeof a.attr("data-parse-as-dictionary")){var s=n.map(e,function(e,t){return e===!0?t:!1});s=n.reject(s,function(e){return e===!1}),t[o]=s}}}),t},_consumeArrayData:function(e){var i=n.extend({},e);return this.ui.arrayInput.each(function(){var e=t(this).attr("name");if(!e||!i[e])return!0;var o=i[e],a=o.split(/[,\s]/).map(function(e){return t.trim(e)});a=n.reject(a,function(e){return 0===e.length}),i[e]=a}),i},_consumeFiles:function(e){var i=n.extend({},e),o=this;return this.ui.fileInput.each(function(){var e=t(this).attr("name");if(!e)return!0;if(e in o._files){var n=o._files[e].map(function(e){return e.file});i[e]=n}else i[e]=[]}),i},_consumeDates:function(e){var i=n.extend({},e);return this.ui.datetimeInput.each(function(){var e=t(this).attr("name");if(e&&e in i){var n=moment(i[e],c.momentDateFormats);i[e]=n.isValid()?n:null}}),i},consumeFormData:function(){var e=Backbone.Syphon.serialize(this);return e=this._consumeCustomInputs(e),e=this._consumeCheckboxGroups(e),e=this._consumeArrayData(e),e=this._consumeFiles(e),e=this._consumeDates(e)},submitForm:function(e){e.preventDefault();var t=this.consumeFormData();this.trigger("submit",t)},cancelForm:function(e){e.preventDefault(),this.trigger("cancel")},triggerFileBrowse:function(e){var i=t(e.currentTarget),n=i.attr("data-bound-file-input"),o=this.ui.fileInput.filter("[name="+n+"]");o.trigger("click")},handleFileSelect:function(e){var i=this,o=t(e.target),d=o.attr("name"),c=o.attr(s.selectLimit)||0,p=o.closest(r.formGroup).find(r.filePreviewList),u=o.attr("data-accepted-type"),m=p.attr("data-list-item-class"),f=o[0].files;if(!d)throw new Error("The file input needs a name for the file parser to properly work");d in i._files||(i._files[d]=[]);for(var h,g=[],v=0;h=f[v];v++){if(c&&i._files[d].length+1>c){a.execute("notify",{title:"File limit reached",text:"Only <b>"+c+"</b> file"+(c>1?"s are":" is")+" allowed in this field",type:"warning"});break}if(l(u,h)){var w="file_"+n.uniqueId();i._files[d].push({id:w,file:h});{h.type}g.push('<li data-file-id="',w,'" class="closable ',m,'">'),g.push("<strong>",h.name,"</strong>"),g.push(" - ",parseInt(h.size/1024,10)," KB"),g.push('<span class="closer" aria-hidden="true">&times;</span></li>')}else a.execute("notify",{title:"Invalid file",text:"File <strong>"+h.name+"</strong> is not of an accepted ["+u+"] format",type:"error"})}p.append(g.join("")),i._handleFileDeletion(p,d)},showExistingFiles:function(e,t){var i=t||this.model.attributes,n=this;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o],s=n.ui.fileInput.filter('[name="'+o+'"]');if(s.length>0)if(a instanceof Array)for(var r,d=0;r=a[d];d++)console.log(a[d],o),n.addExistingFile(a[d],o,e);else n.addExistingFile(a,o,e)}},addExistingFile:function(e,t,i){if(e&&t){var o=this.ui.fileInput.filter('[name="'+t+'"]');if(0===o.length)throw new Error("There is no input with name `"+t+"` to attach the file");t in this._files||(this._files[t]=[]);var a=o.attr(s.selectLimit)||0;if(this._files[t].length+1>a)throw new Error("File limit ("+a+") reached for input`"+t+"`");var d="file_"+n.uniqueId();this._files[t].push({id:d,file:null,url:e});var c=o.closest(r.formGroup).find(r.filePreviewList),l=c.attr("data-list-item-class"),p=[];p.push('<li data-file-id="',d,'" class="closable ',l,'">'),p.push('<a target="_blank" href="',i+"/"+e,'">'),p.push("<strong>",e.split("/").pop(),"</strong>"),p.push("</a>"),p.push('<span class="closer" aria-hidden="true">&times;</span></li>'),c.append(p.join("")),this._handleFileDeletion(c,t)}},_handleFileDeletion:function(e,i){var o=this;e.off().on("click",".closer",function(e){var a=t(this).closest("li");a.animate({opacity:0},200,function(){a.remove()});var s=a.attr("data-file-id");o._files[i]=n.reject(o._files[i],function(e){return e.id===s&&o.trigger("file:deleted",i,e.url),e.id===s})})},initDatetimePicker:function(){this.ui.datetimeInput.datetimepicker({pickTime:!1,useCurrent:!1})},submitOnEnter:function(e){13===e.which&&this.submitForm(e)}})}).call(t,i(28),i(29))},154:function(module,exports,__webpack_require__){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<section class="container max-width-xs">\r\n	<div class="page-header">\r\n		<h4>Login</h4>\r\n	</div>\r\n\r\n	<form role="form">\r\n\r\n		<div class="panel panel-danger hidden">\r\n			<div class="panel-heading">\r\n				<h3 class="panel-title"><span class="icomoon icomoon-warning2"></span>Wrong credentials</h3>\r\n			</div>\r\n			<div class="panel-body">\r\n				Please make sure your username and password are correct\r\n			</div>\r\n		</div>\r\n\r\n		<div class="form-group">\r\n			<label for="user[email]">Email</label>\r\n			<div class="input-group">\r\n				<span class="input-group-addon"><span class="icomoon icomoon-at-sign"></span></span>\r\n				<input type="email" class="form-control" name="user[email]" placeholder="example@email.com" value="'+(null==(__t=email)?"":__t)+'">\r\n			</div>\r\n			<p class="text-danger validation-error hidden"></p>\r\n		</div>\r\n		<div class="form-group">\r\n			<label for="password">Password</label>\r\n			<div class="input-group">\r\n				<span class="input-group-addon"><span class="icomoon icomoon-key"></span></span>\r\n				<input type="password" class="form-control" name="password" placeholder="Your password">\r\n			</div>\r\n			<p class="text-danger validation-error hidden"></p>\r\n		</div>\r\n		<div class="form-group">\r\n			<button type="button" class="btn btn-success btn-submit">Login</button>\r\n			<button type="button" class="btn btn-success preloader hidden" disabled="disabled">Processing...</button>\r\n			<button type="button" class="btn btn-default btn-cancel">Cancel</button>\r\n		</div>\r\n\r\n	</form>\r\n\r\n	<p class="help-block">\r\n		Forgot your password?\r\n		<a href="'+(null==(__t=rootUrl)?"":__t)+'/reset/recover">Recover it</a>\r\n	</p>\r\n\r\n</section>';return __p}},159:function(e,t,i){var n,o;!function(a,s){n=[i(29),i(48),i(28)],o=function(e,t,i){return s(e,t,i)}.apply(t,n),!(void 0!==o&&(e.exports=o))}(this,function(e,t,i){"use strict";var n=t.Syphon,o=t.Syphon={};o.VERSION="0.6.0",o.noConflict=function(){return t.Syphon=n,this},o.ignoredTypes=["button","submit","reset","fieldset"],o.serialize=function(t,n){var o={},r=d(n),l=a(t,r);return e.each(l,function(e){var t=i(e),n=s(t),a=r.keyExtractors.get(n),d=a(t),l=r.inputReaders.get(n),p=l(t),u=r.keyAssignmentValidators.get(n);if(u(t,d,p)){var m=r.keySplitter(d);o=c(o,m,p)}}),o},o.deserialize=function(t,n,o){var r=d(o),c=a(t,r),p=l(r,n);e.each(c,function(e){var t=i(e),n=s(t),o=r.keyExtractors.get(n),a=o(t),d=r.inputWriters.get(n),c=p[a];d(t,c)})};var a=function(t,n){var o=r(t);return o=e.reject(o,function(t){var o,a=s(t),r=n.keyExtractors.get(a),d=r(i(t)),c=e.find(n.ignoredTypes,function(e){return e===a||i(t).is(e)}),l=e.include(n.include,d),p=e.include(n.exclude,d);return o=l?!1:n.include?!0:p||c})},s=function(e){var t,n=i(e),o=n[0].tagName,a=o;return"input"===o.toLowerCase()&&(t=n.attr("type"),a=t?t:"text"),a.toLowerCase()},r=function(t){return e.isUndefined(t.$el)?i(t).children(":input"):t.$(":input")},d=function(t){var i=e.clone(t)||{};return i.ignoredTypes=e.clone(o.ignoredTypes),i.inputReaders=i.inputReaders||o.InputReaders,i.inputWriters=i.inputWriters||o.InputWriters,i.keyExtractors=i.keyExtractors||o.KeyExtractors,i.keySplitter=i.keySplitter||o.KeySplitter,i.keyJoiner=i.keyJoiner||o.KeyJoiner,i.keyAssignmentValidators=i.keyAssignmentValidators||o.KeyAssignmentValidators,i},c=function(t,i,n){if(!i)return t;var o=i.shift();return t[o]||(t[o]=e.isArray(o)?[]:{}),0===i.length&&(e.isArray(t[o])?t[o].push(n):t[o]=n),i.length>0&&c(t[o],i,n),t},l=function(t,i,n){var o={};return e.each(i,function(i,a){var s={};n&&(a=t.keyJoiner(n,a)),e.isArray(i)?(a+="[]",s[a]=i):e.isObject(i)?s=l(t,i,a):s[a]=i,e.extend(o,s)}),o},p=o.TypeRegistry=function(){this.registeredTypes={}};p.extend=t.Model.extend,e.extend(p.prototype,{get:function(t){return e.has(this.registeredTypes,t)?this.registeredTypes[t]:this.registeredTypes["default"]},register:function(e,t){this.registeredTypes[e]=t},registerDefault:function(e){this.registeredTypes["default"]=e},unregister:function(t){e.has(this.registeredTypes,t)&&delete this.registeredTypes[t]}});var u=o.KeyExtractorSet=p.extend(),m=o.KeyExtractors=new u;m.registerDefault(function(e){return e.prop("name")||""});var f=o.InputReaderSet=p.extend(),h=o.InputReaders=new f;h.registerDefault(function(e){return e.val()}),h.register("checkbox",function(e){return e.prop("indeterminate")?null:e.prop("checked")});var g=o.InputWriterSet=p.extend(),v=o.InputWriters=new g;v.registerDefault(function(e,t){e.val(t)}),v.register("checkbox",function(e,t){null===t?e.prop("indeterminate",!0):e.prop("checked",t)}),v.register("radio",function(e,t){e.prop("checked",e.val()===t.toString())});var w=o.KeyAssignmentValidatorSet=p.extend(),k=o.KeyAssignmentValidators=new w;return k.registerDefault(function(){return!0}),k.register("radio",function(e,t,i){return e.prop("checked")}),o.KeySplitter=function(e){var t,i=e.match(/[^\[\]]+/g);return e.length>1&&e.indexOf("[]")===e.length-2&&(t=i.pop(),i.push([t])),i},o.KeyJoiner=function(e,t){return e+"["+t+"]"},t.Syphon})},160:function(e,t,i){var n,o,a;!function(s,r){"use strict";o=[i(28),i(21)],n=r,a="function"==typeof n?n.apply(t,o):n,!(void 0!==a&&(e.exports=a))}(this,function(e,t){"use strict";if("undefined"==typeof t)throw new Error("momentjs is required");var i=0,n=function(n,o){var a,s=e.fn.datetimepicker.defaults,r={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},d=this,c=!1,l=function(){var a,c,l=!1;if(d.options=e.extend({},s,o),d.options.icons=e.extend({},r,d.options.icons),d.element=e(n),u(),!d.options.pickTime&&!d.options.pickDate)throw new Error("Must choose at least one picker");if(d.id=i++,t.locale(d.options.language),d.date=t(),d.unset=!1,d.isInput=d.element.is("input"),d.component=!1,d.element.hasClass("input-group")&&(d.component=d.element.find(0===d.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),d.format=d.options.format,a=t().localeData(),d.format||(d.format=d.options.pickDate?a.longDateFormat("L"):"",d.options.pickDate&&d.options.pickTime&&(d.format+=" "),d.format+=d.options.pickTime?a.longDateFormat("LT"):"",d.options.useSeconds&&(-1!==a.longDateFormat("LT").indexOf(" A")?d.format=d.format.split(" A")[0]+":ss A":d.format+=":ss")),d.use24hours=d.format.toLowerCase().indexOf("a")<0&&d.format.indexOf("h")<0,d.component&&(l=d.component.find("span")),d.options.pickTime&&l&&l.addClass(d.options.icons.time),d.options.pickDate&&l&&(l.removeClass(d.options.icons.time),l.addClass(d.options.icons.date)),d.options.widgetParent="string"==typeof d.options.widgetParent&&d.options.widgetParent||d.element.parents().filter(function(){return"scroll"===e(this).css("overflow-y")}).get(0)||"body",d.widget=e(G()).appendTo(d.options.widgetParent),d.minViewMode=d.options.minViewMode||0,"string"==typeof d.minViewMode)switch(d.minViewMode){case"months":d.minViewMode=1;break;case"years":d.minViewMode=2;break;default:d.minViewMode=0}if(d.viewMode=d.options.viewMode||0,"string"==typeof d.viewMode)switch(d.viewMode){case"months":d.viewMode=1;break;case"years":d.viewMode=2;break;default:d.viewMode=0}d.viewMode=Math.max(d.viewMode,d.minViewMode),d.options.disabledDates=q(d.options.disabledDates),d.options.enabledDates=q(d.options.enabledDates),d.startViewMode=d.viewMode,d.setMinDate(d.options.minDate),d.setMaxDate(d.options.maxDate),v(),w(),y(),b(),D(),g(),E(),p().prop("disabled")||V(),""!==d.options.defaultDate&&""===p().val()&&d.setValue(d.options.defaultDate),1!==d.options.minuteStepping&&(c=d.options.minuteStepping,d.date.minutes(Math.round(d.date.minutes()/c)*c%60).seconds(0))},p=function(){var e;if(d.isInput)return d.element;if(e=d.element.find(".datepickerinput"),0===e.size())e=d.element.find("input");else if(!e.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return e},u=function(){var e;e=d.element.is("input")?d.element.data():d.element.find("input").data(),void 0!==e.dateFormat&&(d.options.format=e.dateFormat),void 0!==e.datePickdate&&(d.options.pickDate=e.datePickdate),void 0!==e.datePicktime&&(d.options.pickTime=e.datePicktime),void 0!==e.dateUseminutes&&(d.options.useMinutes=e.dateUseminutes),void 0!==e.dateUseseconds&&(d.options.useSeconds=e.dateUseseconds),void 0!==e.dateUsecurrent&&(d.options.useCurrent=e.dateUsecurrent),void 0!==e.calendarWeeks&&(d.options.calendarWeeks=e.calendarWeeks),void 0!==e.dateMinutestepping&&(d.options.minuteStepping=e.dateMinutestepping),void 0!==e.dateMindate&&(d.options.minDate=e.dateMindate),void 0!==e.dateMaxdate&&(d.options.maxDate=e.dateMaxdate),void 0!==e.dateShowtoday&&(d.options.showToday=e.dateShowtoday),void 0!==e.dateCollapse&&(d.options.collapse=e.dateCollapse),void 0!==e.dateLanguage&&(d.options.language=e.dateLanguage),void 0!==e.dateDefaultdate&&(d.options.defaultDate=e.dateDefaultdate),void 0!==e.dateDisableddates&&(d.options.disabledDates=e.dateDisableddates),void 0!==e.dateEnableddates&&(d.options.enabledDates=e.dateEnableddates),void 0!==e.dateIcons&&(d.options.icons=e.dateIcons),void 0!==e.dateUsestrict&&(d.options.useStrict=e.dateUsestrict),void 0!==e.dateDirection&&(d.options.direction=e.dateDirection),void 0!==e.dateSidebyside&&(d.options.sideBySide=e.dateSidebyside),void 0!==e.dateDaysofweekdisabled&&(d.options.daysOfWeekDisabled=e.dateDaysofweekdisabled)},m=function(){var t,i="absolute",n=d.component?d.component.offset():d.element.offset(),o=e(window);d.width=d.component?d.component.outerWidth():d.element.outerWidth(),n.top=n.top+d.element.outerHeight(),"up"===d.options.direction?t="top":"bottom"===d.options.direction?t="bottom":"auto"===d.options.direction&&(t=n.top+d.widget.height()>o.height()+o.scrollTop()&&d.widget.height()+d.element.outerHeight()<n.top?"top":"bottom"),"top"===t?(n.bottom=o.height()-n.top+d.element.outerHeight()+3,d.widget.addClass("top").removeClass("bottom")):(n.top+=1,d.widget.addClass("bottom").removeClass("top")),void 0!==d.options.width&&d.widget.width(d.options.width),"left"===d.options.orientation&&(d.widget.addClass("left-oriented"),n.left=n.left-d.widget.width()+20),W()&&(i="fixed",n.top-=o.scrollTop(),n.left-=o.scrollLeft()),o.width()<n.left+d.widget.outerWidth()?(n.right=o.width()-n.left-d.width,n.left="auto",d.widget.addClass("pull-right")):(n.right="auto",d.widget.removeClass("pull-right")),d.widget.css("top"===t?{position:i,bottom:n.bottom,top:"auto",left:n.left,right:n.right}:{position:i,top:n.top,bottom:"auto",left:n.left,right:n.right})},f=function(e,i){(!t(d.date).isSame(t(e))||c)&&(c=!1,d.element.trigger({type:"dp.change",date:t(d.date),oldDate:t(e)}),"change"!==i&&d.element.change())},h=function(e){c=!0,d.element.trigger({type:"dp.error",date:t(e,d.format,d.options.useStrict)})},g=function(e){t.locale(d.options.language);var i=e;i||(i=p().val(),i&&(d.date=t(i,d.format,d.options.useStrict)),d.date||(d.date=t())),d.viewDate=t(d.date).startOf("month"),k(),x()},v=function(){t.locale(d.options.language);var i,n=e("<tr>"),o=t.weekdaysMin();if(d.options.calendarWeeks===!0&&n.append('<th class="cw">#</th>'),0===t().localeData()._week.dow)for(i=0;7>i;i++)n.append('<th class="dow">'+o[i]+"</th>");else for(i=1;8>i;i++)n.append(7===i?'<th class="dow">'+o[0]+"</th>":'<th class="dow">'+o[i]+"</th>");d.widget.find(".datepicker-days thead").append(n)},w=function(){t.locale(d.options.language);var e,i="",n=t.monthsShort();for(e=0;12>e;e++)i+='<span class="month">'+n[e]+"</span>";d.widget.find(".datepicker-months td").append(i)},k=function(){if(d.options.pickDate){t.locale(d.options.language);var i,n,o,a,s,r,c,l,p,u=d.viewDate.year(),m=d.viewDate.month(),f=d.options.minDate.year(),h=d.options.minDate.month(),g=d.options.maxDate.year(),v=d.options.maxDate.month(),w=[],k=t.months();for(d.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-days th:eq(1)").text(k[m]+" "+u),n=t(d.viewDate,d.format,d.options.useStrict).subtract(1,"months"),c=n.daysInMonth(),n.date(c).startOf("week"),(u===f&&h>=m||f>u)&&d.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(u===g&&m>=v||u>g)&&d.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),o=t(n).add(42,"d");n.isBefore(o);){if(n.weekday()===t().startOf("week").weekday()&&(a=e("<tr>"),w.push(a),d.options.calendarWeeks===!0&&a.append('<td class="cw">'+n.week()+"</td>")),s="",n.year()<u||n.year()===u&&n.month()<m?s+=" old":(n.year()>u||n.year()===u&&n.month()>m)&&(s+=" new"),n.isSame(t({y:d.date.year(),M:d.date.month(),d:d.date.date()}))&&(s+=" active"),(O(n,"day")||!A(n))&&(s+=" disabled"),d.options.showToday===!0&&n.isSame(t(),"day")&&(s+=" today"),d.options.daysOfWeekDisabled)for(r=0;r<d.options.daysOfWeekDisabled.length;r++)if(n.day()===d.options.daysOfWeekDisabled[r]){s+=" disabled";break}a.append('<td class="day'+s+'">'+n.date()+"</td>"),i=n.date(),n.add(1,"d"),i===n.date()&&n.add(1,"d")}for(d.widget.find(".datepicker-days tbody").empty().append(w),p=d.date.year(),k=d.widget.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active"),p===u&&k.eq(d.date.month()).addClass("active"),f>u-1&&d.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),u+1>g&&d.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),r=0;12>r;r++)u===f&&h>r||f>u?e(k[r]).addClass("disabled"):(u===g&&r>v||u>g)&&e(k[r]).addClass("disabled");for(w="",u=10*parseInt(u/10,10),l=d.widget.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).parents("table").find("td"),d.widget.find(".datepicker-years").find("th").removeClass("disabled"),f>u&&d.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),u+9>g&&d.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),u-=1,r=-1;11>r;r++)w+='<span class="year'+(-1===r||10===r?" old":"")+(p===u?" active":"")+(f>u||u>g?" disabled":"")+'">'+u+"</span>",u+=1;l.html(w)}},y=function(){t.locale(d.options.language);var e,i,n,o=d.widget.find(".timepicker .timepicker-hours table"),a="";if(o.parent().hide(),d.use24hours)for(e=0,i=0;6>i;i+=1){for(a+="<tr>",n=0;4>n;n+=1)a+='<td class="hour">'+j(e.toString())+"</td>",e++;a+="</tr>"}else for(e=1,i=0;3>i;i+=1){for(a+="<tr>",n=0;4>n;n+=1)a+='<td class="hour">'+j(e.toString())+"</td>",e++;a+="</tr>"}o.html(a)},b=function(){var e,t,i=d.widget.find(".timepicker .timepicker-minutes table"),n="",o=0,a=d.options.minuteStepping;for(i.parent().hide(),1===a&&(a=5),e=0;e<Math.ceil(60/a/4);e++){for(n+="<tr>",t=0;4>t;t+=1)60>o?(n+='<td class="minute">'+j(o.toString())+"</td>",o+=a):n+="<td></td>";n+="</tr>"}i.html(n)},D=function(){var e,t,i=d.widget.find(".timepicker .timepicker-seconds table"),n="",o=0;for(i.parent().hide(),e=0;3>e;e++){for(n+="<tr>",t=0;4>t;t+=1)n+='<td class="second">'+j(o.toString())+"</td>",o+=5;n+="</tr>"}i.html(n)},x=function(){if(d.date){var e=d.widget.find(".timepicker span[data-time-component]"),t=d.date.hours(),i=d.date.format("A");d.use24hours||(0===t?t=12:12!==t&&(t%=12),d.widget.find(".timepicker [data-action=togglePeriod]").text(i)),e.filter("[data-time-component=hours]").text(j(t)),e.filter("[data-time-component=minutes]").text(j(d.date.minutes())),e.filter("[data-time-component=seconds]").text(j(d.date.second()))}},M=function(i){i.stopPropagation(),i.preventDefault(),d.unset=!1;var n,o,a,s,r=e(i.target).closest("span, td, th"),c=t(d.date);if(1===r.length&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"picker-switch":E(1);break;case"prev":case"next":a=H.modes[d.viewMode].navStep,"prev"===r[0].className&&(a=-1*a),d.viewDate.add(a,H.modes[d.viewMode].navFnc),k()}break;case"span":r.is(".month")?(n=r.parent().find("span").index(r),d.viewDate.month(n)):(o=parseInt(r.text(),10)||0,d.viewDate.year(o)),d.viewMode===d.minViewMode&&(d.date=t({y:d.viewDate.year(),M:d.viewDate.month(),d:d.viewDate.date(),h:d.date.hours(),m:d.date.minutes(),s:d.date.seconds()}),B(),f(c,i.type)),E(-1),k();break;case"td":r.is(".day")&&(s=parseInt(r.text(),10)||1,n=d.viewDate.month(),o=d.viewDate.year(),r.is(".old")?0===n?(n=11,o-=1):n-=1:r.is(".new")&&(11===n?(n=0,o+=1):n+=1),d.date=t({y:o,M:n,d:s,h:d.date.hours(),m:d.date.minutes(),s:d.date.seconds()}),d.viewDate=t({y:o,M:n,d:Math.min(28,s)}),k(),B(),f(c,i.type))}},S={incrementHours:function(){Y("add","hours",1)},incrementMinutes:function(){Y("add","minutes",d.options.minuteStepping)},incrementSeconds:function(){Y("add","seconds",1)},decrementHours:function(){Y("subtract","hours",1)},decrementMinutes:function(){Y("subtract","minutes",d.options.minuteStepping)},decrementSeconds:function(){Y("subtract","seconds",1)},togglePeriod:function(){var e=d.date.hours();e>=12?e-=12:e+=12,d.date.hours(e)},showPicker:function(){d.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),d.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(e(t.target).text(),10);d.use24hours||(d.date.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),d.date.hours(i),S.showPicker.call(d)},selectMinute:function(t){d.date.minutes(parseInt(e(t.target).text(),10)),S.showPicker.call(d)},selectSecond:function(t){d.date.seconds(parseInt(e(t.target).text(),10)),S.showPicker.call(d)}},C=function(i){var n=t(d.date),o=e(i.currentTarget).data("action"),a=S[o].apply(d,arguments);return T(i),d.date||(d.date=t({y:1970})),B(),x(),f(n,i.type),a},T=function(e){e.stopPropagation(),e.preventDefault()},_=function(e){27===e.keyCode&&d.hide()},I=function(i){t.locale(d.options.language);var n=e(i.target),o=t(d.date),a=t(n.val(),d.format,d.options.useStrict);a.isValid()&&!O(a)&&A(a)?(g(),d.setValue(a),f(o,i.type),B()):(d.viewDate=o,d.unset=!0,f(o,i.type),h(a))},E=function(e){e&&(d.viewMode=Math.max(d.minViewMode,Math.min(2,d.viewMode+e))),d.widget.find(".datepicker > div").hide().filter(".datepicker-"+H.modes[d.viewMode].clsName).show()},V=function(){var t,i,n,o,a;d.widget.on("click",".datepicker *",e.proxy(M,this)),d.widget.on("click","[data-action]",e.proxy(C,this)),d.widget.on("mousedown",e.proxy(T,this)),d.element.on("keydown",e.proxy(_,this)),d.options.pickDate&&d.options.pickTime&&d.widget.on("click.togglePicker",".accordion-toggle",function(s){if(s.stopPropagation(),t=e(this),i=t.closest("ul"),n=i.find(".in"),o=i.find(".collapse:not(.in)"),n&&n.length){if(a=n.data("collapse"),a&&a.transitioning)return;n.collapse("hide"),o.collapse("show"),t.find("span").toggleClass(d.options.icons.time+" "+d.options.icons.date),d.component&&d.component.find("span").toggleClass(d.options.icons.time+" "+d.options.icons.date)}}),d.isInput?d.element.on({click:e.proxy(d.show,this),focus:e.proxy(d.show,this),change:e.proxy(I,this),blur:e.proxy(d.hide,this)}):(d.element.on({change:e.proxy(I,this)},"input"),d.component?(d.component.on("click",e.proxy(d.show,this)),d.component.on("mousedown",e.proxy(T,this))):d.element.on("click",e.proxy(d.show,this)))},F=function(){e(window).on("resize.datetimepicker"+d.id,e.proxy(m,this)),d.isInput||e(document).on("mousedown.datetimepicker"+d.id,e.proxy(d.hide,this))},P=function(){d.widget.off("click",".datepicker *",d.click),d.widget.off("click","[data-action]"),d.widget.off("mousedown",d.stopEvent),d.options.pickDate&&d.options.pickTime&&d.widget.off("click.togglePicker"),d.isInput?d.element.off({focus:d.show,change:I,click:d.show,blur:d.hide}):(d.element.off({change:I},"input"),d.component?(d.component.off("click",d.show),d.component.off("mousedown",d.stopEvent)):d.element.off("click",d.show))},L=function(){e(window).off("resize.datetimepicker"+d.id),d.isInput||e(document).off("mousedown.datetimepicker"+d.id)},W=function(){if(d.element){var t,i=d.element.parents(),n=!1;for(t=0;t<i.length;t++)if("fixed"===e(i[t]).css("position")){n=!0;break}return n}return!1},B=function(){t.locale(d.options.language);var e="";d.unset||(e=t(d.date).format(d.format)),p().val(e),d.element.data("date",e),d.options.pickTime||d.hide()},Y=function(e,i,n){t.locale(d.options.language);var o;return"add"===e?(o=t(d.date),23===o.hours()&&o.add(n,i),o.add(n,i)):o=t(d.date).subtract(n,i),O(t(o.subtract(n,i)))||O(o)?void h(o.format(d.format)):("add"===e?d.date.add(n,i):d.date.subtract(n,i),void(d.unset=!1))},O=function(e,i){t.locale(d.options.language);var n=t(d.options.maxDate,d.format,d.options.useStrict),o=t(d.options.minDate,d.format,d.options.useStrict);return i&&(n=n.endOf(i),o=o.startOf(i)),e.isAfter(n)||e.isBefore(o)?!0:d.options.disabledDates===!1?!1:d.options.disabledDates[e.format("YYYY-MM-DD")]===!0},A=function(e){return t.locale(d.options.language),d.options.enabledDates===!1?!0:d.options.enabledDates[e.format("YYYY-MM-DD")]===!0},q=function(e){var i,n={},o=0;for(i=0;i<e.length;i++)a=t.isMoment(e[i])||e[i]instanceof Date?t(e[i]):t(e[i],d.format,d.options.useStrict),a.isValid()&&(n[a.format("YYYY-MM-DD")]=!0,o++);return o>0?n:!1},j=function(e){return e=e.toString(),e.length>=2?e:"0"+e},G=function(){var e='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(d.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',t='<tbody><tr><td colspan="'+(d.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',i='<div class="datepicker-days"><table class="table-condensed">'+e+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+e+t+'</table></div><div class="datepicker-years"><table class="table-condensed">'+e+t+"</table></div>",n="";return d.options.pickDate&&d.options.pickTime?(n='<div class="bootstrap-datetimepicker-widget'+(d.options.sideBySide?" timepicker-sbs":"")+(d.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',n+=d.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+i+'</div><div class="col-sm-6 timepicker">'+U.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(d.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+i+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+d.options.icons.time+'"></span></a></li><li'+(d.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+U.getTemplate()+"</div></li></ul>",
n+="</div>"):d.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+U.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+i+"</div></div>"},H={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},U={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};U.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+d.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+d.options.icons.up+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+d.options.icons.up+'"></span></a></td>':"")+(d.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+U.hourTemplate+'</td> <td class="separator">:</td><td>'+(d.options.useMinutes?U.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(d.options.useSeconds?'<td class="separator">:</td><td>'+U.secondTemplate+"</td>":"")+(d.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+d.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+d.options.icons.down+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+d.options.icons.down+'"></span></a></td>':"")+(d.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(d.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},d.destroy=function(){P(),L(),d.widget.remove(),d.element.removeData("DateTimePicker"),d.component&&d.component.removeData("DateTimePicker")},d.show=function(e){if(!p().prop("disabled")){if(d.options.useCurrent&&""===p().val()){if(1!==d.options.minuteStepping){var i=t(),n=d.options.minuteStepping;i.minutes(Math.round(i.minutes()/n)*n%60).seconds(0),d.setValue(i.format(d.format))}else d.setValue(t().format(d.format));f("",e.type)}e&&"click"===e.type&&d.isInput&&d.widget.hasClass("picker-open")||(d.widget.hasClass("picker-open")?(d.widget.hide(),d.widget.removeClass("picker-open")):(d.widget.show(),d.widget.addClass("picker-open")),d.height=d.component?d.component.outerHeight():d.element.outerHeight(),m(),d.element.trigger({type:"dp.show",date:t(d.date)}),F(),e&&T(e))}},d.disable=function(){var e=p();e.prop("disabled")||(e.prop("disabled",!0),P())},d.enable=function(){var e=p();e.prop("disabled")&&(e.prop("disabled",!1),V())},d.hide=function(){var e,i,n=d.widget.find(".collapse");for(e=0;e<n.length;e++)if(i=n.eq(e).data("collapse"),i&&i.transitioning)return;d.widget.hide(),d.widget.removeClass("picker-open"),d.viewMode=d.startViewMode,E(),d.element.trigger({type:"dp.hide",date:t(d.date)}),L()},d.setValue=function(e){t.locale(d.options.language),e?d.unset=!1:(d.unset=!0,B()),e=t.isMoment(e)?e.locale(d.options.language):e instanceof Date?t(e):t(e,d.format,d.options.useStrict),e.isValid()?(d.date=e,B(),d.viewDate=t({y:d.date.year(),M:d.date.month()}),k(),x()):h(e)},d.getDate=function(){return d.unset?null:t(d.date)},d.setDate=function(e){var i=t(d.date);d.setValue(e?e:null),f(i,"function")},d.setDisabledDates=function(e){d.options.disabledDates=q(e),d.viewDate&&g()},d.setEnabledDates=function(e){d.options.enabledDates=q(e),d.viewDate&&g()},d.setMaxDate=function(e){void 0!==e&&(d.options.maxDate=t.isMoment(e)||e instanceof Date?t(e):t(e,d.format,d.options.useStrict),d.viewDate&&g())},d.setMinDate=function(e){void 0!==e&&(d.options.minDate=t.isMoment(e)||e instanceof Date?t(e):t(e,d.format,d.options.useStrict),d.viewDate&&g())},l()};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this),o=i.data("DateTimePicker");o||i.data("DateTimePicker",new n(this,t))})},e.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}})}});